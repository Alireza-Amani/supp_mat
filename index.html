<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Supplementary materials for the evapotranspiration paper</title>
    <meta
      name="description"
      content="Supplementary materials for 'Assessing the generalization
    power of three machine learning models and three evapotranspiration formulas
    using 143 FLUXNET towers data'"
    />
    <meta name="author" content="Alireza Amani" />

    <!-- icons -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />

    <!-- CSS styles -->
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/styles.css" />

    <!-- scripts -->
    <script src="js/jquery-3.6.0.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <!-- <script src="https://cdn.plot.ly/plotly-2.8.3.min.js"></script> -->
    <script src="js/plotly-2.8.3.min.js"></script>
    <script src="https://www.gstatic.com/charts/loader.js"></script>
    <script>
      // var myMapsApiKey = "AIzaSyDkeJEa0IuQEHgzHRR4nZOnk_ZiHF6TwLA";

      google.charts.load("current", {
        packages: ["corechart"],
      });
    </script>
    <script src="js/jquery.csv.min.js"></script>
    <script src="js/ajax-utils.js"></script>
    <script src="js/papaparse.min.js"></script>

    <script src="js/myplots.js"></script>
    <!-- <script src="js/gglplots.js"></script> -->
    <script src="js/script.js"></script>

    <!-- highligher  -->
    <link rel="stylesheet" href="css/prism.css" />
    <script src="js/prism.js"></script>
  </head>

  <body>
    <header>
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
          <button
            class="navbar-toggler ms-auto"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbar_list"
            aria-controls="navbar_list"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbar_list">
            <ul class="navbar-nav me-auto mb-2">
              <li class="nav-item">
                <a href="#" class="nav-link active" aria-current="page"
                  ><span>Home</span></a
                >
              </li>
              <li class="nav-item">
                <a href="#" class="nav-link active" aria-current="page"
                  ><span>Input Variables</span></a
                >
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <main>
      <div class="container">
        <h1 id="paper_title" class="text-center fst-bold mt-5">
          Supplementary materials for
          <span class="fst-italic"
            >'Assessing the generalization power of three machine learning
            models and three evapotranspiration formulas using 143 FLUXNET
            towers data'</span
          >
        </h1>
        <!-- <hr class="mt-5" id="hr_title" /> -->
        <div class="container my-5" id="section_separator">
          <span class="material-icons">more_horiz</span>
        </div>

        <div class="container" id="data_complete">
          <div class="container" id="data_and_button">
            <button
              class="btn btn-primary me-4"
              id="data_show_button"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#data_section"
              aria-hidden="false"
              aria-controls="data_section"
            >
              <span class="material-icons">expand_more</span>
            </button>
            <h1 class="text-center my-5">S1. Data</h1>
          </div>

          <section class="collapse container" id="data_section">
            <p class="mt-5">
              Location of each FLUXNET site used in this study is shown in the
              figure below.
            </p>
            <div id="map_plotly" class="mt-5"></div>
          </section>
        </div>

        <div class="container my-5" id="section_separator">
          <span class="material-icons">more_horiz</span>
        </div>

        <div class="container" id="inputvar_complete">
          <div class="container" id="inputvar_and_button">
            <button
              class="btn btn-primary me-4"
              id="inputvar_show_button"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#inputvar_section"
              aria-hidden="false"
              aria-controls="inputvar_section"
            >
              <span class="material-icons">expand_more</span>
            </button>
            <h1 class="text-center my-5">S2. Input Variables</h1>
          </div>

          <section class="collapse container" id="inputvar_section">
            <p class="mt-5">
              In this section, we can see the selected input variables for the
              models of each experiment.
            </p>
            <p>
              Choose the experiment <br />
              <button
                type="button"
                class="btn btn-primary btn-lg active"
                aria-pressed="true"
                data-bs-toggle="button"
                autocomplete="off"
                id="button_mainExpinputvars_plot"
              >
                Main
              </button>
              <button
                class="btn btn-primary btn-lg"
                id="button_vegetationExpinputvars_plot"
              >
                Vegetation Robustness
              </button>
              <button
                class="btn btn-primary btn-lg"
                id="button_climateExpinputvars_plot"
              >
                Climate Robustness
              </button>
              <button
                class="btn btn-primary btn-lg"
                id="button_temporalExpinputvars_plot"
              >
                Temporal Separation
              </button>
            </p>
            <div id="hbarplot_plotly" class="mt-5"></div>
          </section>
        </div>
        <!-- end of inputvar_complete -->
        <!-- ************************************************************************* -->

        <div class="container my-5" id="section_separator">
          <span class="material-icons">more_horiz</span>
        </div>

        <div class="container" id="hyperparameter_complete">
          <div class="container" id="hyperparameter_and_button">
            <button
              class="btn btn-primary me-4"
              id="hyperparameter_show_button"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#hyperparameter_section"
              aria-hidden="false"
              aria-controls="hyperparameter_section"
            >
              <span class="material-icons">expand_more</span>
            </button>
            <h1 class="text-center my-5">S3. Hyperparameter Tuning</h1>
          </div>

          <section class="collapse container" id="hyperparameter_section">
            <p class="mt-5">
              In this section, we can see the selected input variables for the
              models of each experiment.
            </p>

            <p>Choose the experiment</p>

            <div class="form-check form-check-inline">
              <input
                type="radio"
                class="form-check-input"
                name="experiment_hyperparam"
                id="button_mainExphyperparameter"
                value="Main"
              />
              <label for="experiment_hyperparam" class="form-check-label"
                >Main</label
              >
            </div>
            <div class="form-check form-check-inline">
              <input
                type="radio"
                class="form-check-input"
                name="experiment_hyperparam"
                id="button_vegetationExphyperparameter"
                value="Vegetation Robustness"
              />
              <label for="experiment_hyperparam" class="form-check-label"
                >Vegetation Robustness</label
              >
            </div>
            <div class="form-check form-check-inline">
              <input
                type="radio"
                class="form-check-input"
                name="experiment_hyperparam"
                id="button_climateExphyperparameter"
                value="Climate Robustness"
              />
              <label for="experiment_hyperparam" class="form-check-label"
                >Climate Robustness</label
              >
            </div>
            <div class="form-check form-check-inline">
              <input
                type="radio"
                class="form-check-input"
                name="experiment_hyperparam"
                id="button_temporalExphyperparameter"
                value=" Temporal Separation"
              />
              <label for="experiment_hyperparam" class="form-check-label">
                Temporal Separation</label
              >
            </div>

            <p>
              Choose the model
              <br />
            </p>

            <div class="form-check form-check-inline">
              <input
                type="radio"
                class="form-check-input"
                name="model_hyperparam"
                id="button_RFhyperparameter"
                value="RF"
              />
              <label for="model_hyperparam" class="form-check-label">RF</label>
            </div>
            <div class="form-check form-check-inline">
              <input
                type="radio"
                class="form-check-input"
                name="model_hyperparam"
                id="button_LGBMhyperparameter"
                value="LGBM"
              />
              <label for="model_hyperparam" class="form-check-label"
                >LGBM</label
              >
            </div>
            <div class="form-check form-check-inline">
              <input
                type="radio"
                class="form-check-input"
                name="model_hyperparam"
                id="button_NNperparameter"
                value="NN"
              />
              <label for="model_hyperparam" class="form-check-label">NN</label>
            </div>

            <div id="codes_hyperparameter" class="container">
              <pre class="lang-python" id="main_rf_hyperparams"><code>#!Python
from sklearn.ensemble import RandomForestRegressor
                
nj = 22 # numer of CPU cores to use
seed = 1915 # random seed 
                
# Random Forest instance
rf = RandomForestRegressor(n_jobs=nj, verbose=1, random_state=seed)
rf_tuned_hyperparameters = {
    "n_estimators" : 100,
    "max_features" : 3,
    "max_samples" : 0.05,
    "min_samples_leaf" : 3}
rf.set_params(**rf_tuned_hyperparameters)
rf.fit(X_train, y_train) # model is ready to be fit on training set</code></pre>
              <pre
                class="lang-python"
                id="vegetation_rf_hyperparams"
              ><code>#!Python
from sklearn.ensemble import RandomForestRegressor
                
nj = 22 # numer of CPU cores to use
seed = 1915 # random seed 
                
# Random Forest instance
rf = RandomForestRegressor(n_jobs=nj, verbose=1, random_state=seed)
rf_tuned_hyperparameters = {
    "n_estimators" : 100,
    "max_features" : 4,
    "max_samples" : 0.01,
    "min_samples_leaf" : 4}
rf.set_params(**rf_tuned_hyperparameters)
rf.fit(X_train, y_train) # model is ready to be fit on training set</code></pre>

              <pre
                class="lang-python"
                id="climate_rf_hyperparams"
              ><code>#!Python
from sklearn.ensemble import RandomForestRegressor
                
nj = 22 # numer of CPU cores to use
seed = 1915 # random seed 
                
# Random Forest instance
rf = RandomForestRegressor(n_jobs=nj, verbose=1, random_state=seed)
rf_tuned_hyperparameters = {
    "n_estimators" : 100,
    "max_features" : 2,
    "max_samples" : 0.05,
    "min_samples_leaf" : 3}
rf.set_params(**rf_tuned_hyperparameters)
rf.fit(X_train, y_train) # model is ready to be fit on training set</code></pre>

              <pre
                class="lang-python"
                id="temporal_rf_hyperparams"
              ><code>#!Python
from sklearn.ensemble import RandomForestRegressor
                
nj = 22 # numer of CPU cores to use
seed = 1915 # random seed 
                
# Random Forest instance
rf = RandomForestRegressor(n_jobs=nj, verbose=1, random_state=seed)
rf_tuned_hyperparameters = {
    "n_estimators" : 100,
    "max_features" : 5,
    "max_samples" : 0.5,
    "min_samples_leaf" : 3}
rf.set_params(**rf_tuned_hyperparameters)
rf.fit(X_train, y_train) # model is ready to be fit on training set</code></pre>

              <pre class="lang-python" id="main_lgbm_hyperparams"><code>#!Python
import lightgbm

nj = 22 # numer of CPU cores to use
seed = 1915 # random seed 

LGBM = lightgbm.LGBMRegressor(n_jobs=4, random_state=4, subsample_freq=1)
LGBM_tuned_hyperparameters = {
    "n_estimators" : 500,
    "learning_rate" : 0.025,
    "num_leaves" : 10,
    "min_data_in_leaf" : 100,
    "subsample" : 0.05,
    "feature_fraction" : 0.9 

}
LGBM.set_params(**LGBM_tuned_hyperparameters) 
lightgbm.early_stopping(15)

LGBM.fit(X_train, y_train) # model is ready to be fit on training set</code></pre>

              <pre
                class="lang-python"
                id="vegetation_lgbm_hyperparams"
              ><code>#!Python
import lightgbm

nj = 22 # numer of CPU cores to use
seed = 1915 # random seed 

LGBM = lightgbm.LGBMRegressor(n_jobs=4, random_state=4, subsample_freq=1)
LGBM_tuned_hyperparameters = {
    "n_estimators" : 500,
    "learning_rate" : 0.01,
    "num_leaves" : 8,
    "min_data_in_leaf" : 100,
    "subsample" : 0.1,
    "feature_fraction" : 0.7 

}
LGBM.set_params(**LGBM_tuned_hyperparameters) 
lightgbm.early_stopping(15)

LGBM.fit(X_train, y_train) # model is ready to be fit on training set</code></pre>

              <pre
                class="lang-python"
                id="climate_lgbm_hyperparams"
              ><code>#!Python
import lightgbm

nj = 22 # numer of CPU cores to use
seed = 1915 # random seed 

LGBM = lightgbm.LGBMRegressor(n_jobs=4, random_state=4, subsample_freq=1)
LGBM_tuned_hyperparameters = {
    "n_estimators" : 250,
    "learning_rate" : 0.015,
    "num_leaves" : 6,
    "min_data_in_leaf" : 100,
    "subsample" : 0.05,
    "feature_fraction" : 0.7 
}
LGBM.set_params(**LGBM_tuned_hyperparameters) 
lightgbm.early_stopping(15)

LGBM.fit(X_train, y_train) # model is ready to be fit on training set</code></pre>

              <pre class="lang-python" id="temporal_lgbm_hyperparams"><code>#!Python
import lightgbm

nj = 22 # numer of CPU cores to use
seed = 1915 # random seed 

LGBM = lightgbm.LGBMRegressor(n_jobs=4, random_state=4, subsample_freq=1)
LGBM_tuned_hyperparameters = {
    "n_estimators" : 1000,
    "learning_rate" : 0.075,
    "num_leaves" : 40,
    "min_data_in_leaf" : 25,
    "subsample" : 0.7,
    "feature_fraction" : 1 

}
LGBM.set_params(**LGBM_tuned_hyperparameters) 
lightgbm.early_stopping(15)

LGBM.fit(X_train, y_train) # model is ready to be fit on training set</code></pre>
            </div>
          </section>
        </div>
        <!-- end of hyperparameter_complete -->
        <!-- ************************************************************************* -->

        <div class="container my-5" id="section_separator">
          <span class="material-icons">more_horiz</span>
        </div>
        <div id="gglplot" class="container"></div>
      </div>
    </main>
  </body>
</html>
